added update fixed sum bugs
